{"pageProps":{"post":{"title":"Code Your First API With Node.js and Express","excerpt":"If you've spent any amount of time with modern web development, you will have come across terms like REST and API. If you've have heard of these terms or work with APIs but don't have a complete understanding of how they work or how to build your own API, this series is for you.","featuredImage":{"url":"https://media.graphcms.com/vZJuKIyTGGOu7mGws0TE"},"author":{"name":"Tania Rascia","bio":"I'm Tania, a designer, developer, writer, and former chef. I love creating open source projects and contributing to the developer community. I write the missing instruction manuals of the web.","photo":{"url":"https://media.graphcms.com/QMSaAJ6oQomxjEzjCv61"}},"createdAt":"2021-11-27T12:30:54.930366+00:00","slug":"api","content":{"raw":{"children":[{"type":"heading-two","children":[{"text":"Understanding REST and RESTful APIs"}]},{"type":"paragraph","children":[{"text":"If you've spent any amount of time with modern web development, you will have come across terms like REST and API. If you've heard of these terms or work with APIs but don't have a complete understanding of how they work or how to build your own API, this series is for you."}]},{"type":"paragraph","children":[{"text":"In this tutorial series, we will start with an overview of REST principles and concepts. Then we will go on to create our own full-fledged API that runs on a Node.js Express server and connects to a MySQL database. After finishing this series, you should feel confident building your own API or delving into the documentation of an existing API."}]},{"type":"heading-three","children":[{"text":"Prerequisites"}]},{"type":"paragraph","children":[{"text":"In order to get the most out of this tutorial, you should already have some "},{"href":"https://www.taniarascia.com/how-to-use-the-command-line-for-apple-macos-and-linux/","type":"link","children":[{"text":"basic command line knowledge"}],"openInNewTab":false},{"text":", know the fundamentals of JavaScript, and have "},{"href":"https://www.taniarascia.com/how-to-install-and-use-node-js-and-npm-mac-and-windows/","type":"link","children":[{"text":"Node.js installed globally"}],"openInNewTab":false},{"text":"."}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":""},{"href":"https://code.tutsplus.com/tutorials/the-command-line-is-your-best-friend--net-30362","type":"link","children":[{"text":""},{"href":"https://cdn.tutsplus.com/net/authors/jeffreyway/command-line-is-your-best-friend.jpg","type":"link","title":"(Image)","children":[{"text":"https://cdn.tutsplus.com/net/authors/jeffreyway/command-line-is-your-best-friend.jpg"}],"openInNewTab":true},{"text":""}],"className":"roundup-block__content-link","openInNewTab":false},{"text":""}]}]}]},{"type":"heading-two","children":[{"text":"What Are REST and RESTful APIs?"}]},{"type":"paragraph","children":[{"text":"Representational State Transfer, or "},{"bold":true,"text":"REST"},{"text":", describes an architectural style for web services. REST consists of a set of standards or constraints for sharing data between different systems, and systems that implement REST are known as RESTful. REST is an abstract concept, not a language, framework, or type of software."}]},{"type":"paragraph","children":[{"text":"A loose analogy for REST would be keeping a collection of vinyl vs. using a streaming music service. With the physical vinyl collection, each record must be duplicated in its entirety to share and distribute copies. With a streaming service, however, the same music can be shared in perpetuity via a reference to some data such as a song title. In this case, the streaming music is a RESTful service, and the vinyl collection is a non-RESTful service."}]},{"type":"paragraph","children":[{"text":"An "},{"bold":true,"text":"API"},{"text":" is an Application Programming Interface, which is an interface that allows software programs to communicate with each other. A "},{"bold":true,"text":"RESTful API"},{"text":" is simply an API that adheres to the principles and constraints of REST. In a Web API, a server receives a "},{"bold":true,"text":"request"},{"text":" through a URL endpoint and sends a "},{"bold":true,"text":"response"},{"text":" in return, which is often data in a format such as JSON."}]},{"type":"heading-two","children":[{"text":"REST Principles"}]},{"type":"paragraph","children":[{"text":"Six guiding constraints define the REST architecture, outlined below."}]},{"type":"numbered-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Uniform Interface"},{"text":": The interface of components must be the same. This means using the URI standard to identify resources—in other words, paths that could be entered into the browser's location bar."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Client-Server"},{"text":": There is a separation of concerns between the server, which stores and manipulates data, and the client, which requests and displays the response."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Stateless Interactions"},{"text":": All information about each request is contained in each individual request and does not depend on session state."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Cacheable"},{"text":": The client and server can cache resources."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Layered System"},{"text":": The client can be connected to the end server, or an intermediate layer such as a load-balancer."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Code on Demand (Optional)"},{"text":": A client can download code, which reduces visibility from the outside."}]}]}]},{"type":"heading-two","children":[{"text":"Request and Response"}]},{"type":"paragraph","children":[{"text":"You will already be familiar with the fact that all websites have URLs that begin with "},{"code":true,"text":"http"},{"text":" (or "},{"code":true,"text":"https"},{"text":" for the secure version). HyperText Transfer Protocol, or "},{"bold":true,"text":"HTTP"},{"text":", is the method of communication between clients and servers on the internet. "}]},{"type":"paragraph","children":[{"text":"We see it most obviously in the URL bar of our browsers, but HTTP can be used for more than just requesting websites from servers. When you go to a URL on the web, you are actually doing a "},{"code":true,"text":"GET"},{"text":" request on that specific resource, and the website you see is the body of the response. We will go over "},{"code":true,"text":"GET"},{"text":" and other types of requests shortly."}]},{"type":"paragraph","children":[{"text":"HTTP works by opening a "},{"bold":true,"text":"TCP"},{"text":" (Transmission Control Protocol) connection to a server port ("},{"code":true,"text":"80"},{"text":"for "},{"code":true,"text":"http"},{"text":", "},{"code":true,"text":"443"},{"text":" for "},{"code":true,"text":"https"},{"text":") to make a request, and the listening server responds with a status and a body."}]},{"type":"paragraph","children":[{"text":"A request must consist of a URL, a method, header information, and a body."}]},{"type":"heading-three","children":[{"text":"Request Methods"}]},{"type":"paragraph","children":[{"text":"There are four major HTTP methods, also referred to as HTTP verbs, that are commonly used to interact with web APIs. These methods define the action that will be performed with any given resource. "}]},{"type":"paragraph","children":[{"text":"HTTP request methods loosely correspond to the paradigm of "},{"bold":true,"text":"CRUD"},{"text":", which stands for "},{"text":"Create, Update, Read, Delete","italic":true},{"text":". Although CRUD refers to functions used in database operations, we can apply those design principles to HTTP verbs in a RESTful API."}]},{"type":"table","children":[{"type":"table_head","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"text":"Action"}]},{"type":"table_cell","children":[{"text":"Request Method"}]},{"type":"table_cell","children":[{"text":"Definition"}]}]}]},{"type":"table_body","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Read"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"GET"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Retrieves a resource"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Create"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"POST"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Creates a new resource"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Update"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"PUT"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Updates an existing resource"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Delete"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"DELETE"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"Deletes a resource"}]}]}]}]}]},{"type":"paragraph","children":[{"code":true,"text":"GET"},{"text":" is a safe, read-only operation that will not alter the state of a server. Every time you hit a URL in your browser, such as "},{"code":true,"text":"https://www.google.com"},{"text":", you are sending a "},{"code":true,"text":"GET"},{"text":" request to Google's servers."}]},{"type":"paragraph","children":[{"code":true,"text":"POST"},{"text":" is used to create a new resource. A familiar example of "},{"code":true,"text":"POST"},{"text":" is signing up as a user on a website or app. After submitting the form, a "},{"code":true,"text":"POST"},{"text":" request with the user data might be sent to the server, which will then write that information into a database. "}]},{"type":"paragraph","children":[{"code":true,"text":"PUT"},{"text":" updates an existing resource, which might be used to edit the settings of an existing user. Unlike "},{"code":true,"text":"POST"},{"text":", "},{"code":true,"text":"PUT"},{"text":" is "},{"bold":true,"text":"idempotent"},{"text":", meaning the same call can be made multiple times without producing a different result. For example, if you sent the same "},{"code":true,"text":"POST"},{"text":" request to create a new user in a database multiple times, it would create a new user with the same data for each request you made. However, using the same "},{"code":true,"text":"PUT"},{"text":" request on the same user would continuously produce the same result."}]},{"type":"paragraph","children":[{"code":true,"text":"DELETE"},{"text":", as the name suggests, will simply delete an existing resource."}]},{"type":"heading-three","children":[{"text":"Response Codes"}]},{"type":"paragraph","children":[{"text":"Once a request goes through from the client to the server, the server will send back an HTTP response, which will include metadata about the response known as headers, as well as the body. The first and most important part of the response is the "},{"bold":true,"text":"status code"},{"text":", which indicates if a request was successful, if there was an error, or if another action must be taken. "}]},{"type":"paragraph","children":[{"text":"The most well-known response code you will be familiar with is "},{"code":true,"text":"404"},{"text":", which means "},{"code":true,"text":"Not Found"},{"text":". "},{"code":true,"text":"404"},{"text":"is part of the "},{"code":true,"text":"4xx"},{"text":" class of status codes, which indicate client errors. There are five classes of status codes that each contain a range of responses."}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"1xx"},{"text":": Information"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"2xx"},{"text":": Success\n"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"3xx"},{"text":": Redirection\n"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"4xx"},{"text":": Client Error\n"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"5xx"},{"text":": Server Error"}]}]}]},{"type":"paragraph","children":[{"text":"Other common responses you may be familiar with are "},{"code":true,"text":"301 Moved Permanently"},{"text":", which is used to redirect websites to new URLs, and "},{"code":true,"text":"500 Internal Server Error"},{"text":", which is an error that comes up frequently when something unexpected has happened on a server that makes it impossible to fulfil the intended request."}]},{"type":"paragraph","children":[{"text":"With regards to RESTful APIs and their corresponding HTTP verbs, all the responses should be in the "},{"code":true,"text":"2xx"},{"text":" range. "}]},{"type":"table","children":[{"type":"table_head","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"text":"Request"}]},{"type":"table_cell","children":[{"text":"Response"}]}]}]},{"type":"table_body","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"GET"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"200"}]},{"type":"paragraph","children":[{"text":" (OK)"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"POST"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"201"}]},{"type":"paragraph","children":[{"text":" (Created)"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"PUT"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"200"}]},{"type":"paragraph","children":[{"text":" (OK)"}]}]}]},{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"DELETE"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"200"}]},{"type":"paragraph","children":[{"text":" (OK), "}]},{"type":"paragraph","children":[{"text":"202"}]},{"type":"paragraph","children":[{"text":" (Accepted), or "}]},{"type":"paragraph","children":[{"text":"204"}]},{"type":"paragraph","children":[{"text":" (No Content)"}]}]}]}]}]},{"type":"paragraph","children":[{"code":true,"text":"200 OK"},{"text":" is the response that indicates that a request is successful. It is used as a response when sending a "},{"code":true,"text":"GET"},{"text":" or "},{"code":true,"text":"PUT"},{"text":" request. "},{"code":true,"text":"POST"},{"text":" will return a "},{"code":true,"text":"201 Created"},{"text":" to indicate that a new resource has been created, and "},{"code":true,"text":"DELETE"},{"text":" has a few acceptable responses, which convey that either the request has been accepted ("},{"code":true,"text":"202"},{"text":"), or there is no content to return because the resource no longer exists ("},{"code":true,"text":"204"},{"text":"). "}]},{"type":"paragraph","children":[{"text":"We can test the status code of a resource request using cURL, which is a command-line tool used for transferring data via URLs. Using "},{"code":true,"text":"curl"},{"text":", followed by the "},{"code":true,"text":"-i"},{"text":" or "},{"code":true,"text":"--include"},{"text":" flag, will send a "},{"code":true,"text":"GET"},{"text":" request to a URL and display the headers and body. We can test this by opening the command-line program and testing cURL with Google."}]},{"type":"code-block","children":[{"text":"curl -i https://www.google.com\n"}]},{"type":"paragraph","children":[{"text":"Google's server will respond with the following."}]},{"type":"table","children":[{"type":"table_body","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"1"}]},{"type":"paragraph","children":[{"text":"2"}]},{"type":"paragraph","children":[{"text":"3"}]},{"type":"paragraph","children":[{"text":"4"}]},{"type":"paragraph","children":[{"text":"5"}]},{"type":"paragraph","children":[{"text":"6"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"HTTP/2 200 date: Tue, 14 Aug 2018 05:15:40 GMT expires: -1 cache-control: private, max-age=0 content-type: text/html; charset=ISO-8859-1 ..."}]}]}]}]}]},{"type":"paragraph","children":[{"text":"As we can see, the "},{"code":true,"text":"curl"},{"text":" request returns multiple headers and the entire HTML body of the response. Since the request went through successfully, the first part of the response is the "},{"code":true,"text":"200"},{"text":"status code, along with the version of HTTP (this will either be HTTP/1.1 or HTTP/2)."}]},{"type":"paragraph","children":[{"text":"Since this particular request is returning a website, the "},{"code":true,"text":"content-type"},{"text":" (MIME type) being returned is "},{"code":true,"text":"text/html"},{"text":". In a RESTful API, you will likely see "},{"code":true,"text":"application/json"},{"text":" to indicate the response is JSON."}]},{"type":"paragraph","children":[{"text":"Interestingly, we can see another type of response by inputting a slightly different URL. Do a "},{"code":true,"text":"curl"},{"text":"on Google without the "},{"code":true,"text":"www"},{"text":"."}]},{"type":"code-block","children":[{"text":"curl -i https://google.com\n"}]},{"type":"table","children":[{"type":"table_body","children":[{"type":"table_row","children":[{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"1"}]},{"type":"paragraph","children":[{"text":"2"}]},{"type":"paragraph","children":[{"text":"3"}]},{"type":"paragraph","children":[{"text":"4"}]}]},{"type":"table_cell","children":[{"type":"paragraph","children":[{"text":"HTTP/2 301 location: https://www.google.com/ content-type: text/html; charset=UTF-8"}]}]}]}]}]},{"type":"paragraph","children":[{"text":"Google redirects "},{"code":true,"text":"google.com"},{"text":" to "},{"code":true,"text":"www.google.com"},{"text":", and uses a "},{"code":true,"text":"301"},{"text":" response to indicate that the resource should be redirected."}]},{"type":"heading-two","children":[{"text":"REST API Endpoints"}]},{"type":"paragraph","children":[{"text":"When an API is created on a server, the data it contains is accessible via endpoints. An "},{"bold":true,"text":"endpoint"},{"text":"is the URL of the request that can accept and process the "},{"code":true,"text":"GET"},{"text":", "},{"code":true,"text":"POST"},{"text":", "},{"code":true,"text":"PUT"},{"text":", or "},{"code":true,"text":"DELETE"},{"text":" request. "}]},{"type":"paragraph","children":[{"text":"An API URL will consist of the root, path, and optional query string."}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Root"},{"text":" e.g. "},{"code":true,"text":"https://api.example.com"},{"text":" or "},{"code":true,"text":"https://api.example.com/v2"},{"text":": The root of the API, which may consist of the protocol, domain, and version."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Path"},{"text":" e.g. "},{"code":true,"text":"/users/"},{"text":"or "},{"code":true,"text":"/users/5"},{"text":": Unique location of the specific resource."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Query Parameters (optional)"},{"text":" e.g. "},{"code":true,"text":"?location=chicago&age=29"},{"text":": Optional key value pairs used for sorting, filtering, and pagination.\nWe can put them all together to implement something such as the example below, which would return a list of all users and use a query parameter of "},{"code":true,"text":"limit"},{"text":" to filter the responses to only include ten results."}]}]}]},{"type":"paragraph","children":[{"code":true,"text":"https://api.example.com/users?limit=10"}]},{"type":"paragraph","children":[{"text":"Generally, when people refer to an API as a RESTful API, they are referring to the naming conventions that go into building API URL endpoints. A few important conventions for a standard RESTful API are as follows:"}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Paths should be plural"},{"text":": For example, to get the user with an id of "},{"code":true,"text":"5"},{"text":", we would use "},{"code":true,"text":"/users/5"},{"text":", not "},{"code":true,"text":"/user/5"},{"text":"."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Endpoints should not display the file extension"},{"text":": Although an API will most likely be returning JSON, the URL should not end in "},{"code":true,"text":".json"},{"text":"."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Endpoints should use nouns, not verbs"},{"text":": Words like "},{"code":true,"text":"add"},{"text":" and "},{"code":true,"text":"delete"},{"text":" should not appear in a REST URL. In order to add a new user, you would simply send a "},{"code":true,"text":"POST"},{"text":" request to "},{"code":true,"text":"/users"},{"text":", not something like "},{"code":true,"text":"/users/add"},{"text":". The API should be developed to handle multiple types of requests to the same URL."}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"bold":true,"text":"Paths are case sensitive, and should be written in lowercase with hyphens as opposed to underscores"},{"text":"."}]}]}]},{"type":"paragraph","children":[{"text":"All of these conventions are guidelines, as there are no strict REST standards to follow. However, using these guidelines will make your API consistent, familiar, and easy to read and understand."}]},{"type":"heading-two","children":[{"text":"Conclusion"}]},{"type":"paragraph","children":[{"text":"In this article, we learned what REST and RESTful APIs are, how HTTP request methods and response codes work, the structure of an API URL, and common RESTful API conventions. In the next tutorial, we will learn how to put all this theory to use by setting up an Express server with Node.js and building our own API."}]}]}},"categories":[{"name":"Web Development","slug":"webdev"}]}},"__N_SSG":true}